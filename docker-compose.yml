version: "3"
services:
    nginx:
        image: nginx:latest
        volumes:
            - ./nginx.conf:/etc/nginx/nginx.conf:ro
        ports:
            - 3000:80
    app:
        build: .
    elasticsearch:
        image: docker.elastic.co/elasticsearch/elasticsearch:7.15.1
        ports:
            - 9200:9200
        environment:
            - "discovery.type=single-node"
        volumes:
            - $PWD/data_elasticsearch:/usr/share/elasticsearch/data
    kibana:
        image: docker.elastic.co/kibana/kibana:7.15.1
        ports:
            - "5601:5601"
